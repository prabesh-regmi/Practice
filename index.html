<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Weather app</title>
  </head>
  <body>
<div id="input">
      <label for="cityInput">City Name:</label>
        <input id="cityInput" type="text" name="city" >
        <button type="submit" class="addbtn" name="button">Submit</button>
</div>
    <div id="output">

    </div>

  </body>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function(){
  const outputDisplay = document.getElementById("output");
// outputDisplay.remove();
$('.addbtn').click(function(){
   var city = $("#cityInput").val();

 $.ajax({
     url:'/',
     method:'post',
     dataType:'json',
     data:{'city':city},
     success:function(response){
       const result = `<h1>The temperature in `+ response.city +` is ` + response.temp + ` degrees Celcius.</h1> <p> The weather condition is ` + response.weatherDescription + `</p> <img src= ` + response.imageSrc + ` alt='Cannot load'>`;
      outputDisplay.innerHTML = "";
      outputDisplay.insertAdjacentHTML("beforeend", result);
         $('#cityInput').val('') ;
      },
     error:function(response){
         alert('server error occured')
     }
 });
});
});


//       const outputDisplay = document.getElementById("output");
//
//       fetch("https://localhost:3000")
//         .then(response =>{return response.json})
//         .then(data =>{
//           console.log("response");
//           const result = `<h1>The temperature in `+ city +` is ` + temp + ` degrees Celcius.</h1> <p> The weather condition is ` + weatherDescription + `</p> <img src= ` + imageSrc + ` alt='Cannot load'>`;
//           outputDisplay.insertAdjacentHTML("beforeend", result);
// });

</script>
</html>
